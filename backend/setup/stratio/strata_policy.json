{
  "id":"15fd0e92-1159-4d13-8c0e-a81291a6b5b1",
  "version":2,
  "storageLevel":"MEMORY_AND_DISK_SER",
  "name":"meetlytix_policy_kafka_dse",
  "description":"Meetlytix Policy to publish in Kafka and DSE",
  "sparkStreamingWindow":"3s",
  "checkpointPath":"/tmp/checkpoint",
  "rawData":{
    "enabled":"false",
    "path":"default"
  },
  "transformations":[
    {
      "type":"Morphlines",
      "order":0,
      "inputField":"_attachment_body",
      "outputFields":[
        {
          "name":"venue_name",
          "type":"text"
        },
        {
          "name":"venue_lon",
          "type":"double"
        },
        {
          "name":"venue_lat",
          "type":"double"
        },
        {
          "name":"venue_id",
          "type":"long"
        },
        {
          "name":"visibility",
          "type":"string"
        },
        {
          "name":"response",
          "type":"string"
        },
        {
          "name":"guests",
          "type":"integer"
        },
        {
          "name":"member_id",
          "type":"long"
        },
        {
          "name":"member_name",
          "type":"string"
        },
        {
          "name":"rsvp_id",
          "type":"long"
        },
        {
          "name":"mtime",
          "type":"timestamp"
        },
        {
          "name":"event_name",
          "type":"text"
        },
        {
          "name":"event_id",
          "type":"string"
        },
        {
          "name":"event_url",
          "type":"string"
        },
        {
          "name":"event_time",
          "type":"timestamp"
        },
        {
          "name":"group_topics",
          "type":"string"
        },
        {
          "name":"group_city",
          "type":"string"
        },
        {
          "name":"group_country",
          "type":"string"
        },
        {
          "name":"group_id",
          "type":"long"
        },
        {
          "name":"group_name",
          "type":"string"
        },
        {
          "name":"group_lon",
          "type":"double"
        },
        {
          "name":"group_urlname",
          "type":"string"
        },
        {
          "name":"group_state",
          "type":"string"
        },
        {
          "name":"group_lat",
          "type":"double"
        }
      ],
      "configuration":{
        "morphline":{
          "id":"morphline1",
          "importCommands":[
            "org.kitesdk.**"
          ],
          "commands":[
            {
              "readJson":{

              }
            },
            {
              "extractJsonPaths":{
                "paths":{
                  "venue_name":"/venue/venue_name",
                  "venue_lon":"/venue/lon",
                  "venue_lat":"/venue/lat",
                  "venue_id":"/venue/venue_id",
                  "visibility":"/visibility",
                  "response":"/response",
                  "guests":"/guests",
                  "member_id":"/member/member_id",
                  "member_name":"/member/member_name",
                  "rsvp_id":"/rsvp_id",
                  "mtime":"/mtime",
                  "event_name":"/event/event_name",
                  "event_id":"/event/event_id",
                  "event_url":"/event/event_url",
                  "event_time":"/event/time",
                  "group_topics":"/group/group_topics[]/topic_name",
                  "group_city":"/group/group_city",
                  "group_country":"/group/group_country",
                  "group_id":"/group/group_id",
                  "group_name":"/group/group_name",
                  "group_lon":"/group/group_lon",
                  "group_urlname":"/group/group_urlname",
                  "group_state":"/group/group_state",
                  "group_lat":"/group/group_lat"
                }
              }
            }
          ]
        }
      }
    }
  ],
  "streamTriggers":[

  ],
  "cubes":[
    {
      "name":"ankit",
      "dimensions":[
        {
          "name":"venue_name",
          "field":"venue_name",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"venue_lon",
          "field":"venue_lon",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"venue_lat",
          "field":"venue_lat",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"venue_id",
          "field":"venue_id",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"visibility",
          "field":"visibility",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"response",
          "field":"response",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"guests",
          "field":"guests",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"member_id",
          "field":"member_id",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"member_name",
          "field":"member_name",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"rsvp_id",
          "field":"rsvp_id",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"mtime",
          "field":"mtime",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"event_name",
          "field":"event_name",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"event_id",
          "field":"event_id",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"event_url",
          "field":"event_url",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"event_time",
          "field":"event_time",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_topics",
          "field":"group_topics",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_city",
          "field":"group_city",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_country",
          "field":"group_country",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_id",
          "field":"group_id",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_name",
          "field":"group_name",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_lon",
          "field":"group_lon",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_urlname",
          "field":"group_urlname",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_state",
          "field":"group_state",
          "precision":"identity",
          "type":"Default"
        },
        {
          "name":"group_lat",
          "field":"group_lat",
          "precision":"identity",
          "type":"Default"
        }
      ],
      "operators":[
        {
          "type":"Sum",
          "name":"sum1",
          "configuration":{
            "inputField":"guests"
          }
        }
      ],
      "writer":{
        "outputs":[
          "meetlytix_topic_01",
          "meetup_rsvp_v2"
        ],
        "dateType":"timestamp",
        "isAutoCalculatedId":false
      },
      "triggers":[

      ]
    }
  ],
  "input":{
    "name":"meetup_rsvp_v2",
    "type":"WebSocket",
    "configuration":{
      "url":"ws://stream.meetup.com/2/rsvps"
    }
  },
  "outputs":[
    {
      "name":"meetlytix_topic_01",
      "type":"Kafka",
      "configuration":{
        "producer.type":"async",
        "batch.num.messages":"200",
        "metadata.broker.list":[
          {
            "host":"169.44.152.79",
            "port":"32780"
          },
          {
            "host":"169.44.152.79",
            "port":"32779"
          },
          {
            "host":"169.44.152.79",
            "port":"32778"
          }
        ],
        "request.required.acks":true,
        "kafkaProperties":[
          {
            "kafkaPropertyKey":"",
            "kafkaPropertyValue":""
          }
        ],
        "serializer.class":"kafka.serializer.StringEncoder"
      }
    },
    {
      "name":"meetup_rsvp_v2",
      "type":"Print",
      "configuration":{

      }
    }
  ],
  "fragments":[
    {
      "id":"e0410a2f-2c50-4db3-847e-a85f5d0bf3da",
      "fragmentType":"input",
      "name":"meetup_rsvp_v2",
      "description":"WebSocket is a protocol providing full-duplex communication channels over a single TCP connection.",
      "shortDescription":"WebSocket is a protocol providing full-duplex communication channels over a single TCP connection.",
      "element":{
        "name":"in-WebSocket",
        "type":"WebSocket",
        "configuration":{
          "url":"ws://stream.meetup.com/2/rsvps"
        }
      }
    },
    {
      "id":"55ec8e2e-8aec-49ff-9e20-3416b7d77d83",
      "fragmentType":"output",
      "name":"meetlytix_topic_01",
      "description":"Apache Kafka is publish-subscribe messaging rethought as a distributed commit log. Based on the received-based approach (https://spark.apache.org/docs/latest/streaming-kafka-integration.html)",
      "shortDescription":"Apache Kafka is publish-subscribe messaging rethought as a distributed commit log.",
      "element":{
        "name":"in-Kafka",
        "type":"Kafka",
        "configuration":{
          "producer.type":"async",
          "batch.num.messages":"200",
          "metadata.broker.list":[
            {
              "host":"169.44.152.79",
              "port":"32780"
            },
            {
              "host":"169.44.152.79",
              "port":"32779"
            },
            {
              "host":"169.44.152.79",
              "port":"32778"
            }
          ],
          "request.required.acks":true,
          "kafkaProperties":[
            {
              "kafkaPropertyKey":"",
              "kafkaPropertyValue":""
            }
          ],
          "serializer.class":"kafka.serializer.StringEncoder"
        }
      }
    },
    {
      "id":"2921a5ba-8fce-460f-b979-1a50d39b0a1b",
      "fragmentType":"output",
      "name":"meetup_rsvp_v2",
      "description":"Print output uses the generic implementation with DataFrames, this implementation print each dataframe with his schema.",
      "shortDescription":"Print output uses the generic implementation with DataFrames, this implementation print each dataframe with his schema.",
      "element":{
        "name":"in-Print",
        "type":"Print",
        "configuration":{

        }
      }
    }
  ],
  "userPluginsJars":[

  ]
}
